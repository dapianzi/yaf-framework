<{extends 'public/base.html'}>
<{block name=body}>
<style>
    .icon .layui-form-radio{
        padding: 0px;
        margin: 6px 0px 0 0;
        display: inline;
    }
    .layui-form-radio>i{
        margin-right:5px;
    }
    .mar10{
        margin-right: 10px;
        font-size: 20px;
    }
</style>
<div class="layui-fluid">
    <div class="layui-card">
        <div class="layui-card-header">修改菜单</div>
        <div class="layui-card-body">
            <form class="layui-form " onsubmit="return false;" lay-filter="component-form-element">
                <div class="layui-form-item">
                    <label class="layui-form-label">上级菜单：</label>
                    <div class="layui-input-inline">
                        <select name="parentId" lay-verify="required" lay-search="">
                            <option value="">直接选择或搜索选择</option>
                            <option value="0" selected>顶级菜单</option>
                            <{foreach $menu as $group=>$item}>
                                <option value="<{$item.id}>" <{if $MenuInfo.parentId==$item.id}>selected<{/if}> ><{$item.name}></option>
                            <{/foreach}>
                            </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">图标：</label>
                    <div class="layui-input-block icon" style="width: 500px;">
                        <{foreach $menu_icon as $item}>
                        <input type="radio" name="icon" value="<{$item}>" <{if $MenuInfo.icon == $item}>checked<{/if}>><i class="layui-icon layui-icon-<{$item}> mar10"></i>
                        <{/foreach}>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">名称：</label>
                    <div class="layui-input-inline" style="width: 300px;">
                        <input type="text" name="name" value="<{$MenuInfo.name}>" lay-verify="required" title="名称" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">URL：</label>
                    <div class="layui-input-inline" style="width: 300px;">
                        <input type="text" name="url" value="<{$MenuInfo.url}>" lay-verify="required" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">其他参数：</label>
                    <div class="layui-input-inline" style="width: 300px;">
                        <input type="text" name="param" value="<{$MenuInfo.param}>" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">是否菜单</label>
                    <div class="layui-input-block">
                        <input type="checkbox" <{if $MenuInfo.isMenu=='1'}>checked<{/if}> name="isMenu" lay-skin="switch" lay-filter="switchTest" lay-text="是|否">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">是否显示</label>
                    <div class="layui-input-block">
                        <input type="checkbox" <{if $MenuInfo.isShow=='1'}>checked<{/if}> name="isShow" lay-skin="switch" lay-filter="switchTest" lay-text="是|否">
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <input type="hidden" name="id" value="<{$MenuInfo.id}>">
                        <button class="layui-btn" lay-submit="" lay-filter="add">立即提交</button>
                        <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<{/block}>
<{block name=script}>
<script>
    layui.use(['form', 'layedit', 'laydate'], function(){
        var $ = layui.$;
        var form = layui.form
            ,layer = layui.layer
        //监听提交
        form.on('submit(add)', function(data){
            $.ajax({
                type: 'POST',
                url: '/index/menu/edit/',
                data: data.field,
                success: function (data) {
                    data=JSON.parse(data);
                    if(data.code===0){
                        layer.msg('添加成功',{time: 1000});
                        window.location.href="/index/menu/index/";
                    }else{
                        layer.msg('添加失败');
                    }
                }
            });
            return false;
        });
    });
</script>

<{/block}>

